{"version":3,"sources":["sif-find.es6"],"names":[],"mappings":";;AAEA,YAAY,CAAC;;;;;;;;;;;;;;;;;;;;;yBAmBO,WAAW;;;;sBACZ,QAAQ;;;;kBACJ,IAAI;;oBACR,MAAM;;6BACL,eAAe;;8BAO5B,qBAAqB;;AAE5B,IAAM,SAAS,GAAG,UAVV,IAAI,EAUW,SAAS,EAAE,mBAAmB,CAAC,CAAC;;AAEvD,uBAAQ,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;;AAE5B,IAAI,KAAK,GAAG,uBAAQ,IAAI,CAAC,MAAM,GAAG,uBAAQ,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;;AAExD,IAAI,KAAK,GAAG,mBAfJ,KAAK,EAeK,KAAK,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;AACtC,IAAI,MAAM,GAAG,mBAhBL,KAAK,EAgBM,OAAO,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;;AAE3C,IAAI,KAAK,GAAG,oBAAO,YAAY,EAAE,CAAC;;AAElC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,UAAC,IAAI,EAAK;AAAC,UAAM,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;CAAC,CAAC,CAAC;;AAE9D,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,QAAQ,EAAE,YAAM,EAAE,CAAC,CAAC;AACpC,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,OAAO,EAAE,YAAM,EAAE,CAAC,CAAC;AACnC,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,OAAO,EAAE,YAAM,EAAE,CAAC,CAAC;;AAEnC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;;AAE1B,KAAK,CAAC,EAAE,CAAC,MAAM,EAAE,UAAC,IAAI,EAAK;AACvB,wBAzBA,KAAK,EAyBC,MAAM,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;CAClC,CAAC,CAAC;;AAEH,KAAK,CAAC,EAAE,CAAC,KAAK,EAAE,YAAM;AAClB,wBA7BA,KAAK,EA6BC,MAAM,EAAE,OAAO,CAAC,CAAC;CAC1B,CAAC,CAAC;;AAEH,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,YAAM;;;AAGzB,UAAM,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;;;;;;CAMtB,CAAC,CAAC","file":"sif-find.js","sourcesContent":["#!/usr/bin/env node\n\n'use strict';\n\n/*    _,                           ,--.   ,---.\n *   /(_                    ,---.  `--'  /  .-'\n *  |   '-._       . ' .   (  .-'  ,--.  |  `-,\n *  \\    ,-.)     -= * =- .-'  `)  |  |  |  .-'\n *   \\((` .(       '/. '  `----'   `--'  `--'\n *    )\\  _/       /         just like magic\n * .-'   '--.     /\n *',         \\   /|\n * ';,_) _)'\\ \\,//    This program is distributed\n *  `\\   (   '._/   under the terms of the MIT license.\n *   |  . '.\n *   |      \\   Please see the `LICENSE.md` file for details.\n *   |  \\|   |\n *    \\  |  /    Send your comments and suggestions toâ€¦\n *     '.| /      <https://github.com/v0lkan/sif/issues>.\n */\n\nimport program from 'commander';\nimport byline from 'byline';\nimport {readFile} from 'fs';\nimport {join} from 'path';\nimport {spawn} from 'child_process';\n\nimport {\n    printHeader as header,\n    print,\n    printBlank as blank,\n    printBanner as banner\n} from '../lib/terminal/out';\n\nconst DATA_FILE = join(__dirname, '../data/index.idx');\n\nprogram.parse(process.argv);\n\nlet query = program.args.length ? program.args[0] : '*';\n\nlet child = spawn('cat', [DATA_FILE]);\nlet filter = spawn('egrep', ['-i', query]);\n\nlet lines = byline.createStream();\n\nchild.stdout.on('data', (line) => {filter.stdin.write(line)});\n\nfilter.stdin.on('finish', () => {});\nfilter.stdin.on('error', () => {});\nfilter.stdin.on('close', () => {});\n\nfilter.stdout.pipe(lines);\n\nlines.on('data', (line) => {\n    print('find', line.toString());\n});\n\nlines.on('end', () => {\n    print('find', 'Done.');\n});\n\nchild.stdout.on('end', () => {\n\n    // Waits for buffer to flush before destroying the stream:\n    filter.stdin.end();\n\n    // This will forcefully kill the stream w/o leaving time to flush\n    // the buffer:\n    // filter.stdin.destroy();\n    // ^ Avoid it; it's not documented.\n});\n\n//print('search', 'Command not implemented yet!');\n//blank();\n"]}